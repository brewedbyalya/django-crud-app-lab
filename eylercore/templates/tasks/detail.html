{% extends 'base.html' %}

{% block title %}{{ task.title }} - Details{% endblock %}

{% block content %}
<div class="project-details">
    <h2>📋 {{ task.title }}</h2>
    
    <div class="task-header">
        <div class="task-info-card">
            <strong>Status:</strong>
            <span class="task-status-badge task-status-{{ task.status }}">
                {{ task.get_status_display }}
            </span>
        </div>
        
        <div class="task-info-card">
            <strong>Priority:</strong>
            <span class="task-priority task-priority-{{ task.priority }}">
                {{ task.get_priority_display }}
            </span>
        </div>
        
        <div class="task-info-card">
            <strong>Due Date:</strong>
            <span class="task-due-date">
                {% if task.due_date %}{{ task.due_date|date:"F j, Y" }}{% else %}No deadline{% endif %}
            </span>
        </div>
        
        <div class="task-info-card">
            <strong>Assigned To:</strong>
            <span class="task-assigned">
                {% if task.assigned_to %}{{ task.assigned_to.username }}{% else %}Unassigned{% endif %}
            </span>
        </div>
    </div>

    <div class="task-description">
        <h3>📝 Description</h3>
        <p>
            {{ task.description|linebreaksbr }}
        </p>
    </div>

    {% if task.tags.all %}
    <div class="task-tags">
        <h3>🏷️ Tags</h3>
        <div class="tags-container">
            {% for tag in task.tags.all %}
            <span class="tag" style="background: {{ tag.color }};">
                {{ tag.name }}
            </span>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="task-meta">
        <div class="meta-card">
            <div class="meta-icon">🕰️</div>
            <div class="meta-label">Created</div>
            <div class="meta-value">{{ task.created_at|date:"M j, Y" }}</div>
        </div>
        <div class="meta-card">
            <div class="meta-icon">⚡</div>
            <div class="meta-label">Last Updated</div>
            <div class="meta-value">{{ task.updated_at|date:"M j, Y" }}</div>
        </div>
        <div class="meta-card">
            <div class="meta-icon">📁</div>
            <div class="meta-label">Project</div>
            <div class="meta-value">{{ task.project.name }}</div>
        </div>
    </div>

    <div class="form-actions">
        <a href="{% url 'main_app:edit_task' project.id task.id %}" class="btn btn-edit">✏️ Edit Task</a>
        <a href="{% url 'main_app:delete_task' project.id task.id %}" class="btn btn-delete">🗑️ Delete Task</a>
        <a href="{% url 'main_app:tasks_index' project.id %}" class="btn btn-back">↩️ Back to Tasks</a>
        <a href="{% url 'main_app:projects_detail' project.id %}" class="btn btn-back">🏰 Back to Project</a>
    </div>
</div>
{% endblock %}